<script src="{{ .Site.BaseURL }}js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
done = false;
$(document).ready(function(){
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    }
  }
  var m = $('#main'), a = $('#asidepart'), nav = $("body>header>nav") , $win = $(window);
  $win.resize(function(){
    getSize();
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }
    else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
    }
  });

  //////////////////////////移动端菜单显示
  $("#mobile-start").click(function(){
    $(this).toggleClass("active");
    $("#mobile-menu").toggleClass("active");
  });

  $win.scroll(function(){
    if($win.width()>=1000){
      var scrollTop = $win.scrollTop();
      if(scrollTop>138){ nav.addClass("fixed") }
      else{ nav.removeClass("fixed") }
    }
    else nav.removeClass("fixed");
  });
});
</script>
{{ if eq .Section "post" }}
<script type="text/javascript">
$(document).ready(function(){
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed');
  if(ai.length>0){ ai.wrap('<div class="video-container" />') }
  if(ae.length>0){ ae.wrap('<div class="video-container" />') }
});
</script>
{{ end }}
<script type="text/javascript">
$(document).ready(function(){
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){ $('.qrcode strong').text(' ') });
  });
});
</script>
{{ if or (eq .Section "tag") (eq .Section "category") }}
<script type="text/javascript">
$(document).ready(function(){
  var list = $('.archive-title a'),
      box = $('.all-list-box'),
      first = $('.archive-title a:first-of-type');
      box.load(first.attr('data-src').toString()+' #archive-page');
      first.addClass('current');
  list.each(function(){
    $(this).click(function(){
      var listSrc=$(this).attr('data-src').toString()+' #archive-page';
      box.load(listSrc);
      list.removeClass('current');
      $(this).addClass('current');
     });
    });
  });
</script>
{{ end }}
{{ if and (eq .Section "post") (.Site.Params.FancyBox) }}
<link rel="stylesheet" href="{{ .Site.BaseURL }}fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="{{ .Site.BaseURL }}fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){ $('.fancybox').fancybox() }
});
</script>
{{ end }}
{{ partial "google_analytics.html" . }}